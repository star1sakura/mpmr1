下面给出**赛题第一个要求**（估计每位选手每周粉丝投票数）的**可落地解决方案与建模框架**：目标是用已知的每周评审分数与淘汰结果，反推出每周各选手的粉丝投票（未知且保密）。

---

## 1. 数据预处理（把“每周比赛状态”还原出来）

对每个赛季 (s)、选手 (i)、周 (w)：

1. **周评审总分**
   [
   J_{swi}=\sum_{k=1}^{4} \text{week}w_\text{judge}k_\text{score}
   ]
   对不存在的第4评审用缺失值处理（忽略即可）。

2. **在赛集合 / 淘汰集合**

* 若该周之后分数被记录为 0，表示该选手已淘汰（数据说明明确：被淘汰后后续周记为 0）。
* 用 `results = Eliminated Week w` 直接得到每周淘汰集合 (E_{sw})（可能有人数为 0 或 >1）。
* 该周仍在赛的选手集合为 (A_{sw})。

---

## 2. 统一建模思路：先估“投票份额”，再换算“投票数”

真实投票数 (V_{swi}) 只在**相对比例**上影响淘汰。定义该周总票数 (T_{sw})，投票**份额**：
[
p_{swi}=\frac{V_{swi}}{T_{sw}},\quad \sum_{i\in A_{sw}}p_{swi}=1,; p_{swi}\ge 0
]

> 说明：仅靠评审分数+淘汰结果，(T_{sw}) 的绝对量通常不可识别（尺度自由）。因此建议把输出写成
>
> * 份额 (p_{swi})（最稳健），或
> * 设定统一标尺（如每周总票 (T_{sw}=10^7)，与附录示例一致）得到“等效票数”。

---

## 3. 把节目规则写成“可反推投票”的约束

### 3.1 百分比合并（第 3–27 季）

赛题给出：按百分比合并（评审百分比 + 投票百分比）。
令评审份额：
[
q_{swi}=\frac{J_{swi}}{\sum_{j\in A_{sw}}J_{swj}}
]
合并分数：
[
C_{swi}=q_{swi}+p_{swi}
]
该周被淘汰者（或被淘汰集合）应满足“合并最低”。若单淘汰 (e\in E_{sw})，则对所有幸存者 (j\in A_{sw}\setminus{e})：
[
C_{swe}\le C_{swj}
\quad\Longleftrightarrow\quad
p_{swe}-p_{swj}\le q_{swj}-q_{swe}
]
这是**线性不等式约束**（可解、可做不确定性分析）。

### 3.2 排名合并（第 1–2 季与第 28–34 季）

赛题说明：按排名合并用于第1、2季及第28–34季。此时比较的是
[
\text{RankSum}*i = r^J_i + r^V_i
]
其中 (r^J_i) 由 (J*{swi}) 排序得到，(r^V_i) 由投票 (p_{swi}) 排序得到；淘汰者是 RankSum 最差者（最大）。
由于只用到“排序”，会存在大量等价投票解（赛题附录也明确“很多可能值会给出相同结果”）。

> 第28季起还有“倒数两名由合并确定，评审在倒数两名中选择淘汰谁”的机制。对第一问（估票）最关键的是：**被淘汰者必须落入 Bottom-2**（而不必一定是合并最低）。

---

## 4. 让反推“唯一化”：最大熵 + 平滑先验（核心解法）

因为满足淘汰约束的 (p_{sw}) 往往不唯一，需要引入“最合理”的选择原则。推荐一个**凸优化**框架（可解释、可算不确定性）：

### 4.1 先给一个“先验预测投票份额” ( \tilde p_{swi} )

用评审表现与人气的最小假设：
[
\tilde p_{swi}=\text{softmax}\Big(\alpha_{si}+\beta\cdot z(J_{swi})+\gamma_w\Big)
]

* (\alpha_{si})：该赛季该名人的“基础人气”（潜变量）
* (z(\cdot))：标准化
* (\gamma_w)：周效应（整体热度变化）

### 4.2 在“满足淘汰规则”的可行域内选最合理 (p_{sw})

* 对百分比合并季：可行域由“线性不等式 + 单纯形”给出（上节）。
* 对排名合并季：先在“小规模人数”下搜索/整数规划得到满足淘汰的投票排序 (r^V)，再用 (p\propto \exp(-\kappa r^V)) 映射为连续份额。

最终用优化确定：
[
\min_{p_{sw}}\ \underbrace{|p_{sw}-\tilde p_{sw}|*2^2}*{\text{贴近先验}}
+\lambda\underbrace{|p_{sw}-p_{s,w-1}|*2^2}*{\text{周与周平滑}}
-\tau\underbrace{\sum_{i\in A_{sw}}\log p_{swi}}_{\text{最大熵/防止极端}}
]
s.t. 该季对应规则的淘汰约束 + (\sum p=1,p\ge 0)。

> 直观解释：在所有“能导致真实淘汰结果”的投票分布里，选一个**最平滑、最不过度偏激、且与评审表现/人气先验最一致**的分布。

---

## 5. 一致性检验指标（回答“是否导致每周淘汰一致”）

用估计的 (p_{swi}) 还原节目淘汰流程，定义：

1. **淘汰命中率 EMR**（只在有淘汰的周统计）
   [
   \text{EMR}=\frac{#{\text{预测淘汰集合}=\text{真实淘汰集合}}}{#{\text{有淘汰的周}}}
   ]

2. **Bottom-2 覆盖率 B2CR**（适用于第28季起评审在Bottom-2里二选一）
   [
   \text{B2CR}=\frac{#{\text{真实淘汰者}\in \text{预测Bottom-2}}}{#{\text{第28季起有淘汰的周}}}
   ]
   （此处与规则变化一致。）

---

## 6. 不确定性度量（回答“估计有多确定、是否随人/周变化”）

推荐用“**可行域宽度**”做可解释的不确定性（无需外部假设）：

对每个周 (sw)、每个选手 (i)，在满足所有约束的集合 (\mathcal F_{sw}) 上做两次线性规划：
[
p^{\min}*{swi}=\min*{p\in \mathcal F_{sw}}p_{swi},\qquad
p^{\max}*{swi}=\max*{p\in \mathcal F_{sw}}p_{swi}
]
定义
[
U_{swi}=p^{\max}*{swi}-p^{\min}*{swi}
]
周总体不确定性：
[
U_{sw}=\frac{1}{|A_{sw}|}\sum_{i\in A_{sw}}U_{swi}
]

**结论预期（可写进论文）**：确定性不会恒定——当某周评审分差很大/淘汰约束更强时，(\mathcal F_{sw}) 变小、(U) 变小；当该周人数多、评审分接近、或排名法只约束顺序时，可行域更大、(U) 更大。

---

以上框架即可完整回应第一问的三点：**构造估票模型**、**用一致性指标验证是否复现淘汰**、**用可行域宽度量化不确定性并解释其随周/随人变化**。

