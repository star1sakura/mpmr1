《与星共舞》问题三实现方案（可落地版）

1. 目标
   围绕名人特征与专业舞伴的影响，分别解释评审评分与粉丝偏好，并进一步分析选手“存活周数/进入决赛”的综合表现。

2. 数据与字段
   主数据：req1_features.csv（如缺失则使用 req1_vote_estimates.csv）。
   核心字段：

- season, week
- celebrity_name, ballroom_partner
- celebrity_age_during_season（年龄）
- celebrity_industry
- celebrity_homestate（将州归并为地区）
- J_total（评审总分）
- p_hat（粉丝投票份额）
- eliminated（淘汰标记）

备注：性别字段若不存在，不建议通过姓名推断。需要时仅在有可靠外部来源时补充。

3. 特征工程
   3.1 区域归并

- 将 homestate 映射为大区（如 Northeast/Midwest/South/West）。

  3.2 综合表现指标

- 存活周数：每位选手最后一次出现的 week。
- 是否进入决赛：按赛季最后一周在赛选手作为“入围”。

  3.3 分类变量处理

- Industry 与 Ballroom_Partner 作为高维类别，优先用于混合效应模型的随机效应；若需固定效应，做频次截断。

4. 模型设计
   4.1 评审评分模型（Model J）
   线性混合效应模型（LMM）：

- 因变量：J_total
- 固定效应：Age、Region、Season、Week
- 随机效应：Ballroom_Partner、Industry
  目的：量化技术评分与名人特征/舞伴效应的关系。

  4.2 粉丝投票模型（Model F）
  线性混合效应模型（LMM）：

- 因变量：p_hat
- 固定效应：Age、Region、Season、Week
- 随机效应：Ballroom_Partner、Industry
  目的：量化观众偏好与名人特征/舞伴效应的关系。

  4.3 综合表现模型（Model P）
  二选一：

- 生存分析（Cox）：事件=淘汰；时间=存活周数；进入决赛为右截尾。
- 逻辑回归：目标=是否进入决赛。
  协变量可包含赛季均值的 J_total、p_hat 以及 Region/Industry。

5. 结果解读
   5.1 固定效应对比

- 对比 Model J 与 Model F 的系数方向与显著性，判断“评审偏好”与“粉丝偏好”是否一致。

  5.2 舞伴与行业效应

- 提取随机效应（BLUPs）或方差分量，识别对评分/投票有显著提升的舞伴或行业类别。

  5.3 综合结论

- 量化名人特征、舞伴效应在评审与粉丝两条路径中的差异机制，并给出解释性结论。

6. 软件与实现建议

- R：survival（coxph）、lme4（lmer）。
- Python：lifelines、statsmodels 或 pymer4（可选）。
